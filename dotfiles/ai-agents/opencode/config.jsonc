// ~/.config/opencode/opencode.jsonc
{
  "$schema": "https://opencode.ai/config.json",

  // Optional, but common
  "theme": "opencode",
  "autoupdate": false,

  ////////////////////////////////////////////////////////////
  // PROVIDERS + MODEL
  ////////////////////////////////////////////////////////////

  // Restrict OpenCode to only load OpenAI (closest to your config intent)
  "enabled_providers": ["openai"],

  // Default model (OpenCode uses provider/model style strings)
  "model": "openai/gpt-5.2-codex",

  // If you want to set the key via env/file instead of /connect:
  // (Docs show provider.*.options.apiKey is supported)
  "provider": {
    "openai": {
      "options": {
        "apiKey": "{env:OPENAI_API_KEY}"
        // or: "apiKey": "{file:~/.secrets/openai-key}"
      }
    }
  },

  ////////////////////////////////////////////////////////////
  // PERMISSIONS (replaces Codex approval_policy/safety intent)
  ////////////////////////////////////////////////////////////

  // Default: ask for anything that changes state or touches network.
  // Allow read-only tools without prompting.
  "permission": {
    "*": "ask",

    // Read-only / safe
    "read": "allow",
    "list": "allow",
    "glob": "allow",
    "grep": "allow",

    // Writes / mutations (keep "ask")
    "edit": "ask",
    "write": "ask",
    "patch": "ask",
    "bash": "ask",

    // Web: fully disable search, allow fetch only with approval
    "websearch": "deny",
    "webfetch": "ask",

    // Skills/tooling (optional)
    "skill": "allow"
  },

  ////////////////////////////////////////////////////////////
  // CONTEXT / COST CONTROL (OpenCode-native knobs)
  ////////////////////////////////////////////////////////////

  // Controls automatic context compaction + pruning old tool output.
  "compaction": {
    "auto": true,
    "prune": true,
    "reserved": 10000
  },

  ////////////////////////////////////////////////////////////
  // WATCHER (reduce noise; helps perf + context)
  ////////////////////////////////////////////////////////////

  "watcher": {
    "ignore": [
      ".git/**",
      "node_modules/**",
      "dist/**",
      "bin/**",
      "obj/**"
    ]
  },

  ////////////////////////////////////////////////////////////
  // MCP SERVERS
  ////////////////////////////////////////////////////////////

  "mcp": {
    "context7": {
      "type": "local",
      "command": ["bunx", "-y", "@upstash/context7-mcp@latest"],
      "enabled": true,

      // Docs: timeout is ms (default 5000)
      "timeout": 30000
    }

    // Optional Chrome DevTools MCP
    // "chrome": {
    //   "type": "local",
    //   "command": ["bunx", "chrome-devtools-mcp@latest"],
    //   "enabled": false,
    //   "timeout": 30000
    // }
  }

  ////////////////////////////////////////////////////////////
  // NOTES
  //
  // - OpenCode uses `permission` for approvals (tools booleans are deprecated).
  // - Web search is disabled by denying `websearch`; `webfetch` is "ask".
  // - Credentials can be managed via `/connect` (stored in auth.json) OR via provider.options.apiKey.
  ////////////////////////////////////////////////////////////
}
