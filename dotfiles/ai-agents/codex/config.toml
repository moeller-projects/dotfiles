############################################################
# MODEL
############################################################

model = "gpt-5.2-codex"
preferred_auth_method = "apikey"

# Reduce internal reasoning + output size
model_reasoning_effort = "low"
model_verbosity = "low"


############################################################
# COST CONTROL (PRIMARY LEVERS)
############################################################

# Cap tool output retained in history (default ~10000)
tool_output_token_limit = 3000

# Limit AGENTS.md + project instruction overhead (default 32768)
project_doc_max_bytes = 12288

# Disable automatic web search (enable manually via --search)
web_search = "disabled"


############################################################
# RETRY / STREAM CONTROL (PREVENT HIDDEN TOKEN MULTIPLIERS)
############################################################

request_max_retries = 1
stream_max_retries = 1
stream_idle_timeout_ms = 120000


############################################################
# EXECUTION & SAFETY
############################################################

approval_policy = "on-request"
sandbox_mode = "workspace-write"

[sandbox_workspace_write]
network_access = true


############################################################
# UX / WARNINGS
############################################################

suppress_unstable_features_warning = true

[notice]
hide_full_access_warning = true


############################################################
# FEATURES (BALANCED CAPABILITY MODE)
############################################################

[features]

skills = true
unified_exec = true
shell_snapshot = true

# Keep advanced steering but avoid drift multipliers
multi_agent = false
search_tool = false
apps = false
personality = false
collaboration_modes = false
steer = true

use_linux_sandbox_bwrap = true


############################################################
# MCP TOOLS
############################################################

[mcp_servers.context7]
command = "bunx"
args = ["-y", "@upstash/context7-mcp@latest"]
startup_timeout_sec = 30
tool_timeout_sec = 30

# Optional Chrome DevTools MCP (disabled by default)
# Enable only when browser automation is required.
# [mcp_servers.chrome]
# command = "bunx"
# args = ["chrome-devtools-mcp@latest"]
# startup_timeout_sec = 10
# tool_timeout_sec = 30


############################################################
# LOGGING
############################################################

log_dir = "~/.codex/logs"
